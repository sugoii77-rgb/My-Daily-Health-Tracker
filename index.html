// Îç∞Ïù¥ÌÑ∞ ÎÇ¥Î≥¥ÎÇ¥Í∏∞ (Î∞±ÏóÖ)
        function exportData() {
            try {
                const currentData = localStorage.getItem('dietDiary');
                const historyData = localStorage.getItem('dietDiaryHistory');
                
                if (!currentData && !historyData) {
                    alert('Ï†ÄÏû•Îêú Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§.');
                    return;
                }
                
                const exportData = {
                    currentData: currentData ? JSON.parse(currentData) : null,
                    historyData: historyData ? JSON.parse(historyData) : [],
                    exportDate: new Date().toISOString(),
                    version: '2.0'
                };
                
                const blob = new Blob([JSON.stringify(exportData, null, 2)], { 
                    type: 'application/json' 
                });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = `diet-diary-backup-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                alert('Îç∞Ïù¥ÌÑ∞Í∞Ä Îã§Ïö¥Î°úÎìú Ìè¥ÎçîÏóê Î∞±ÏóÖÎêòÏóàÏäµÎãàÎã§.');
            } catch (error) {
                alert('Îç∞Ïù¥ÌÑ∞ ÎÇ¥Î≥¥ÎÇ¥Í∏∞ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');
            }
        }

        // Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞ (Î≥µÏõê)
        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const importedData = JSON.parse(e.target.result);
                    
                    // Î∞±ÏóÖ ÌååÏùº Ïú†Ìö®ÏÑ± Í≤ÄÏÇ¨
                    if (!importedData.currentData && !importedData.historyData) {
                        alert('Ïò¨Î∞îÎ•¥ÏßÄ ÏïäÏùÄ Î∞±ÏóÖ ÌååÏùºÏûÖÎãàÎã§.');
                        return;
                    }
                    
                    // Í∏∞Ï°¥ Îç∞Ïù¥ÌÑ∞ ÎçÆÏñ¥Ïì∞Í∏∞ ÌôïÏù∏
                    if (localStorage.getItem('dietDiary') || localStorage.getItem('dietDiaryHistory')) {
                        if (!confirm('Í∏∞Ï°¥ Îç∞Ïù¥ÌÑ∞Î•º ÎçÆÏñ¥Ïì∞ÏãúÍ≤†ÏäµÎãàÍπå?')) {
                            return;
                        }
                    }
                    
                    // Îç∞Ïù¥ÌÑ∞ Î≥µÏõê
                    if (importedData.currentData) {
                        localStorage.setItem('dietDiary', JSON.stringify(importedData.currentData));
                    }
                    if (importedData.historyData) {
                        localStorage.setItem('dietDiaryHistory', JSON.stringify(importedData.historyData));
                    }
                    
                    loadData();
                    alert('Îç∞Ïù¥ÌÑ∞Î•º ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Í∞ÄÏ†∏ÏôîÏäµÎãàÎã§.');
                } catch (error) {
                    alert('ÌååÏùº ÌòïÏãùÏù¥ Ïò¨Î∞îÎ•¥ÏßÄ ÏïäÏäµÎãàÎã§.');
                }
            };
            reader.readAsText(file);
            
            // ÌååÏùº ÏûÖÎ†• Ï¥àÍ∏∞Ìôî
            event.target.value = '';
        }        function saveData() {
            const today = new Date().toDateString();
            let totalCalories = 0;
            
            const data = {
                date: today,
                timestamp: new Date().toISOString(),
                meals: {},
                water: document.querySelectorAll('.water-cup.filled').length,
                weight: document.getElementById('weight').value,
                sleep: document.getElementById('sleep').value,
                energy: document.getElementById('energyLevel').value,
                exercise: document.getElementById('exercise').value,
                dailyNote: document.getElementById('dailyNote').value,
                weeklyNote: document.getElementById('weeklyNote').value,
                weeklyPlan: {}
            };

            // ÏãùÏÇ¨ Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû•
            document.querySelectorAll('.meal-section').forEach(section => {
                const meal = section.dataset.meal;
                const calories = parseInt(section.querySelector('[data-field="calories"]').value) || 0;
                totalCalories += calories;
                
                data.meals[meal] = {
                    food: section.querySelector('[data-field="food"]').value,
                    calories: calories,
                    mood: section.querySelector('.mood-icon.selected')?.dataset.mood || null,
                    memo: section.querySelector('[data-field="memo"]').value
                };
            });
            
            data.totalCalories = totalCalories;

            // Ï£ºÍ∞Ñ Í≥ÑÌöç Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû•
            document.querySelectorAll('#weeklyTable input').forEach(input => {
                const day = input.dataset.day;
                const meal = input.dataset.meal;
                if (!data.weeklyPlan[day]) data.weeklyPlan[day] = {};
                data.weeklyPlan[day][meal] = input.value;
            });

            // ÌûàÏä§ÌÜ†Î¶¨ Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû• (Î∂ÑÏÑùÏö©)
            let historyData = JSON.parse(localStorage.getItem('dietDiaryHistory') || '[]');
            
            // Ïò§Îäò Îç∞Ïù¥ÌÑ∞Í∞Ä Ïù¥ÎØ∏ ÏûàÎäîÏßÄ ÌôïÏù∏
            const existingIndex = historyData.findIndex(entry => entry.date === today);
            
            if (existingIndex >= 0) {
                // Í∏∞Ï°¥ Îç∞Ïù¥ÌÑ∞ ÏóÖÎç∞Ïù¥Ìä∏
                historyData[existingIndex] = data;
            } else {
                // ÏÉà Îç∞Ïù¥ÌÑ∞ Ï∂îÍ∞Ä
                historyData.push(data);
            }
            
            // 30Ïùº Ïù¥ÏÉÅ Îêú Îç∞Ïù¥ÌÑ∞Îäî ÏÇ≠Ï†ú (ÏÑ±Îä• ÏµúÏ†ÅÌôî)
            const thirtyDaysAgo = new Date();
            thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);
            historyData = historyData.filter(entry => new Date(entry.date) >= thirtyDaysAgo);

            // Î°úÏª¨ Ïä§ÌÜ†Î¶¨ÏßÄÏóê Ï†ÄÏû•
            try {
                localStorage.setItem('dietDiary', JSON.stringify(data));
                localStorage.setItem('dietDiaryHistory', JSON.stringify(historyData));
                console.log('Îç∞Ïù¥ÌÑ∞Í∞Ä ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§.');
            } catch (error) {
                console.log('Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû• Ï§ë Ïò§Î•ò Î∞úÏÉù:', error);
                alert('Ï†ÄÏû• Í≥µÍ∞ÑÏù¥ Î∂ÄÏ°±Ìï©ÎãàÎã§. ÏùºÎ∂Ä Îç∞Ïù¥ÌÑ∞Î•º ÏÇ≠Ï†úÌï¥Ï£ºÏÑ∏Ïöî.');
            }
        }        function updateTotalCalories() {
            let totalCalories = 0;
            
            document.querySelectorAll('.meal-section').forEach(section => {
                const caloriesInput = section.querySelector('[data-field="calories"]');
                const calories = parseInt(caloriesInput.value) || 0;
                totalCalories += calories;
            });
            
            document.getElementById('totalCalories').textContent = totalCalories + ' kcal';
        }        <!-- Îç∞Ïù¥ÌÑ∞ Î∂ÑÏÑù ÌôîÎ©¥ -->
        <div id="analyticsView" class="hidden space-y-6">
            <!-- Î∂ÑÏÑù Í∏∞Í∞Ñ ÏÑ†ÌÉù -->
            <div class="glass-card rounded-lg p-6 shadow-lg">
                <h3 class="text-lg font-semibold text-purple-800 mb-4">üìä Îç∞Ïù¥ÌÑ∞ Î∂ÑÏÑù</h3>
                <div class="flex gap-4 mb-4">
                    <button id="weeklyAnalysis" class="analysis-period-btn px-4 py-2 bg-purple-600 text-white rounded-lg active">
                        üìÖ ÏßÄÎÇú 7Ïùº (ÏùºÎ≥Ñ)
                    </button>
                    <button id="monthlyAnalysis" class="analysis-period-btn px-4 py-2 bg-gray-200 text-gray-700 rounded-lg">
                        üìà ÏßÄÎÇú 4Ï£º (Ï£ºÎ≥Ñ)
                    </button>
                </div>
            </div>

            <!-- ÏπºÎ°úÎ¶¨ ÏÑ≠Ï∑® Î∂ÑÏÑù -->
            <div class="glass-card rounded-lg p-6 shadow-lg">
                <h4 class="text-md font-semibold text-purple-700 mb-4">üî• ÏπºÎ°úÎ¶¨ ÏÑ≠Ï∑® Î∂ÑÏÑù</h4>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="lg:col-span-2">
                        <canvas id="caloriesChart" width="400" height="200"></canvas>
                    </div>
                    <div class="space-y-4">
                        <div class="bg-purple-50 p-4 rounded-lg">
                            <div class="text-sm text-purple-600">ÌèâÍ∑† ÏùºÏùº ÏπºÎ°úÎ¶¨</div>
                            <div class="text-2xl font-bold text-purple-800" id="avgCalories">0 kcal</div>
                        </div>
                        <div class="bg-orange-50 p-4 rounded-lg">
                            <div class="text-sm text-orange-600">ÏµúÍ≥† ÏπºÎ°úÎ¶¨</div>
                            <div class="text-xl font-bold text-orange-800" id="maxCalories">0 kcal</div>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg">
                            <div class="text-sm text-green-600">ÏµúÏ†Ä ÏπºÎ°úÎ¶¨</div>
                            <div class="text-xl font-bold text-green-800" id="minCalories">0 kcal</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ÏàòÎ∂Ñ ÏÑ≠Ï∑® Î∂ÑÏÑù -->
            <div class="glass-card rounded-lg p-6 shadow-lg">
                <h4 class="text-md font-semibold text-purple-700 mb-4">üíß ÏàòÎ∂Ñ ÏÑ≠Ï∑® Î∂ÑÏÑù</h4>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="lg:col-span-2">
                        <canvas id="waterChart" width="400" height="200"></canvas>
                    </div>
                    <div class="space-y-4">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <div class="text-sm text-blue-600">ÌèâÍ∑† ÏùºÏùº ÏàòÎ∂Ñ</div>
                            <div class="text-2xl font-bold text-blue-800" id="avgWater">0 ml</div>
                        </div>
                        <div class="bg-cyan-50 p-4 rounded-lg">
                            <div class="text-sm text-cyan-600">Í∂åÏû•Îüâ Îã¨ÏÑ±Î•†</div>
                            <div class="text-xl font-bold text-cyan-800" id="waterGoalRate">0%</div>
                        </div>
                        <div class="bg-teal-50 p-4 rounded-lg">
                            <div class="text-sm text-teal-600">Î™©Ìëú: 2000ml</div>
                            <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                                <div class="bg-teal-600 h-2 rounded-full" style="width: 0%" id="waterProgress"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ï≤¥Ï§ë Î≥ÄÌôî Î∂ÑÏÑù -->
            <div class="glass-card rounded-lg p-6 shadow-lg">
                <h4 class="text-md font-semibold text-purple-700 mb-4">‚öñÔ∏è Ï≤¥Ï§ë Î≥ÄÌôî Î∂ÑÏÑù</h4>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="lg:col-span-2">
                        <canvas id="weightChart" width="400" height="200"></canvas>
                    </div>
                    <div class="space-y-4">
                        <div class="bg-indigo-50 p-4 rounded-lg">
                            <div class="text-sm text-indigo-600">Ï≤¥Ï§ë Î≥ÄÌôî</div>
                            <div class="text-xl font-bold text-indigo-800" id="weightChange">0 kg</div>
                        </div>
                        <div class="bg-pink-50 p-4 rounded-lg">
                            <div class="text-sm text-pink-600">Î™©ÌëúÍπåÏßÄ</div>
                            <div class="text-xl font-bold text-pink-800" id="weightToGoal">Î™©Ìëú ÏÑ§Ï†ï ÌïÑÏöî</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ï¢ÖÌï© Ï†êÏàò -->
            <div class="glass-card rounded-lg p-6 shadow-lg">
                <h4 class="text-md font-semibold text-purple-700 mb-4">üèÜ Ï¢ÖÌï© Í±¥Í∞ï Ï†êÏàò</h4>
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <div class="text-center p-4 bg-gradient-to-br from-purple-100 to-pink-100 rounded-lg">
                        <div class="text-3xl font-bold text-purple-800" id="overallScore">85</div>
                        <div class="text-sm text-purple-600">Ï¢ÖÌï© Ï†êÏàò</div>
                    </div>
                    <div class="text-center p-4 bg-gradient-to-br from-blue-100 to-cyan-100 rounded-lg">
                        <div class="text-2xl font-bold text-blue-800" id="hydrationScore">90</div>
                        <div class="text-sm text-blue-600">ÏàòÎ∂Ñ Ï†êÏàò</div>
                    </div>
                    <div class="text-center p-4 bg-gradient-to-br from-green-100 to-emerald-100 rounded-lg">
                        <div class="text-2xl font-bold text-green-800" id="consistencyScore">75</div>
                        <div class="text-sm text-green-600">Íæ∏Ï§ÄÌï® Ï†êÏàò</div>
                    </div>
                    <div class="text-center p-4 bg-gradient-to-br from-orange-100 to-yellow-100 rounded-lg">
                        <div class="text-2xl font-bold text-orange-800" id="balanceScore">80</div>
                        <div class="text-sm text-orange-600">Í∑†Ìòï Ï†êÏàò</div>
                    </div>
                </div>
            </div>
        </div><!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Îã§Ïù¥Ïñ¥Ìä∏ Îã§Ïù¥Ïñ¥Î¶¨</title>
    
    <!-- PWA ÏÑ§Ï†ï -->
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIu2WtOydtOyWtO2KuCDri6TsnbzslrTrpqwiLAogICJzaG9ydF9uYW1lIjogIu2WtOydtOyWtCIsCiAgImljb25zIjogWwogICAgewogICAgICAic3JjIjogImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjNhV1IwYUQwaU1qWXdJaUJvWldsbmFIUTlJakkyTUNJZ2RtbGxkMEp2ZUQwaU1DQXdJREkyTUNBeU5qQWlJR1pwYkd3OUlpTnpaVE0yT1RSaUlpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaVBpQThZMmx5WTJ4bElHTjRQU0l4TXpBaUlHTjVQU0l4TXpBaUlISTlJak13SWlCbWFXeHNQU0lqWlRnM09XWTVJaTgrUEM5emRtYysiLAogICAgICAic2l6ZXMiOiAiMjU2eDI1NiIsCiAgICAgICJ0eXBlIjogImltYWdlL3N2Zyt4bWwiCiAgICB9CiAgXSwKICAic3RhcnRfdXJsIjogIi8iLAogICJkaXNwbGF5IjogInN0YW5kYWxvbmUiLAogICJiYWNrZ3JvdW5kX2NvbG9yIjogIiNmNWYzZmYiLAogICJ0aGVtZV9jb2xvciI6ICIjZTg3OWY5Igp9">
    <meta name="theme-color" content="#e879f9">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Îã§Ïù¥Ïñ¥Ìä∏ Îã§Ïù¥Ïñ¥Î¶¨">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        body {
            background: linear-gradient(135deg, #f5f3ff 0%, #fef7f0 100%);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .clock-container {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 0 auto;
        }
        
        .clock-face {
            width: 100%;
            height: 100%;
            border: 3px solid #e879f9;
            border-radius: 50%;
            position: relative;
            background: white;
        }
        
        .clock-number {
            position: absolute;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: #6b21a8;
            cursor: pointer;
            border-radius: 50%;
            transition: all 0.3s;
        }
        
        .clock-number:hover {
            background: #f3e8ff;
            transform: scale(1.1);
        }
        
        .clock-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 8px;
            height: 8px;
            background: #e879f9;
            border-radius: 50%;
        }
        
        .water-cup {
            width: 40px;
            height: 50px;
            border: 2px solid #06b6d4;
            border-radius: 0 0 8px 8px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s;
            background: white;
        }
        
        .water-cup.filled {
            background: linear-gradient(to top, #06b6d4 0%, #67e8f9 100%);
        }
        
        .mood-icon {
            font-size: 24px;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: all 0.3s;
        }
        
        .mood-icon:hover {
            background: #f3e8ff;
            transform: scale(1.1);
        }
        
        .mood-icon.selected {
            background: #e879f9;
            color: white;
        }
        
        .energy-slider {
            -webkit-appearance: none;
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #e5e7eb;
            outline: none;
        }
        
        .energy-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #e879f9;
            cursor: pointer;
        }
        
        .tab-button {
            transition: all 0.3s;
        }
        
        .tab-button.active {
            background: #e879f9;
            color: white;
        }
        
        .meal-time-marker {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #ef4444;
            border-radius: 50%;
            border: 2px solid white;
            cursor: pointer;
        }
    </style>
</head>
<body class="min-h-screen p-4">
    <div class="max-w-6xl mx-auto">
        <!-- Ìó§Îçî -->
        <div class="glass-card rounded-lg p-6 mb-6 shadow-lg">
            <div class="flex justify-between items-center">
                <h1 class="text-3xl font-bold text-purple-800">üíú Îã§Ïù¥Ïñ¥Ìä∏ Îã§Ïù¥Ïñ¥Î¶¨</h1>
                <div class="flex gap-4">
                    <button id="exportBtn" class="px-4 py-2 bg-green-200 text-green-800 rounded-lg hover:bg-green-300 transition-all">
                        üíæ Î∞±ÏóÖ
                    </button>
                    <input type="file" id="importFile" accept=".json" style="display: none;">
                    <button onclick="document.getElementById('importFile').click()" class="px-4 py-2 bg-blue-200 text-blue-800 rounded-lg hover:bg-blue-300 transition-all">
                        üìÅ Î≥µÏõê
                    </button>
                    <button id="langBtn" class="px-4 py-2 bg-purple-200 text-purple-800 rounded-lg hover:bg-purple-300 transition-all">
                        üåê EN
                    </button>
                    <button id="resetBtn" class="px-4 py-2 bg-red-200 text-red-800 rounded-lg hover:bg-red-300 transition-all">
                        üîÑ Ï¥àÍ∏∞Ìôî
                    </button>
                </div>
            </div>
        </div>

        <!-- ÌÉ≠ ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò -->
        <div class="glass-card rounded-lg p-4 mb-6 shadow-lg">
            <div class="flex gap-2 overflow-x-auto">
                <button id="dailyTab" class="tab-button px-4 py-2 rounded-lg font-semibold active whitespace-nowrap">
                    üìÜ Ïò§ÎäòÏùò Îã§Ïßê
                </button>
                <button id="weeklyTab" class="tab-button px-4 py-2 rounded-lg font-semibold bg-gray-200 text-gray-700 whitespace-nowrap">
                    üìÖ 7Ïùº ÏãùÎã® Í≥ÑÌöç
                </button>
                <button id="analyticsTab" class="tab-button px-4 py-2 rounded-lg font-semibold bg-gray-200 text-gray-700 whitespace-nowrap">
                    üìä Îç∞Ïù¥ÌÑ∞ Î∂ÑÏÑù
                </button>
            </div>
        </div>

        <!-- Îç∞ÏùºÎ¶¨ ÌôîÎ©¥ -->
        <div id="dailyView" class="space-y-6">
            <!-- ÎÇ†Ïßú ÌëúÏãú -->
            <div class="glass-card rounded-lg p-4 shadow-lg">
                <h2 class="text-xl font-bold text-purple-800 mb-2" id="currentDate"></h2>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- 24ÏãúÍ∞Ñ ÏõêÌòï ÏãúÍ≥Ñ -->
                <div class="glass-card rounded-lg p-6 shadow-lg">
                    <h3 class="text-lg font-semibold text-purple-800 mb-4">üïê ÏãùÏÇ¨ ÏãúÍ∞Ñ Í∏∞Î°ù</h3>
                    <div class="clock-container">
                        <div class="clock-face" id="clockFace">
                            <div class="clock-center"></div>
                        </div>
                    </div>
                    <div class="mt-4 text-center">
                        <p class="text-sm text-gray-600">ÏãúÍ∞ÑÏùÑ ÌÅ¥Î¶≠ÌïòÏó¨ ÏãùÏÇ¨ Í∏∞Î°ù</p>
                    </div>
                </div>

                <!-- Î¨º ÏÑ≠Ï∑®Îüâ -->
                <div class="glass-card rounded-lg p-6 shadow-lg">
                    <h3 class="text-lg font-semibold text-purple-800 mb-4">üíß Î¨º ÏÑ≠Ï∑®Îüâ</h3>
                    <div class="grid grid-cols-4 gap-4 mb-4" id="waterCups">
                        <!-- Î¨ºÏªµÎì§Ïù¥ Ïó¨Í∏∞Ïóê ÏÉùÏÑ±Îê©ÎãàÎã§ -->
                    </div>
                    <div class="text-center">
                        <span class="text-lg font-bold text-blue-600" id="waterCount">0</span> / 8 Ïªµ
                        <p class="text-sm text-gray-600">(Ï¥ù <span id="waterTotal">0</span>ml)</p>
                    </div>
                </div>
            </div>

                <!-- ÏãùÏÇ¨Î≥Ñ Í∏∞Î°ù -->
            <div class="glass-card rounded-lg p-6 shadow-lg">
                <h3 class="text-lg font-semibold text-purple-800 mb-4">üçΩÔ∏è ÏãùÏÇ¨ Í∏∞Î°ù</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div class="meal-section" data-meal="breakfast">
                        <h4 class="font-semibold text-purple-700 mb-3">üåÖ ÏïÑÏπ®</h4>
                        <input type="text" placeholder="ÏùåÏãù ÏûÖÎ†•" class="w-full p-2 border rounded-lg mb-2" data-field="food">
                        <input type="number" placeholder="ÏπºÎ°úÎ¶¨ (kcal)" class="w-full p-2 border rounded-lg mb-2" data-field="calories">
                        <div class="flex gap-1 mb-2" data-field="mood">
                            <span class="mood-icon" data-mood="1">üò£</span>
                            <span class="mood-icon" data-mood="2">üòê</span>
                            <span class="mood-icon" data-mood="3">üôÇ</span>
                            <span class="mood-icon" data-mood="4">üòã</span>
                        </div>
                        <textarea placeholder="Î©îÎ™®" class="w-full p-2 border rounded-lg text-sm" rows="2" data-field="memo"></textarea>
                    </div>
                    
                    <div class="meal-section" data-meal="lunch">
                        <h4 class="font-semibold text-purple-700 mb-3">‚òÄÔ∏è Ï†êÏã¨</h4>
                        <input type="text" placeholder="ÏùåÏãù ÏûÖÎ†•" class="w-full p-2 border rounded-lg mb-2" data-field="food">
                        <input type="number" placeholder="ÏπºÎ°úÎ¶¨ (kcal)" class="w-full p-2 border rounded-lg mb-2" data-field="calories">
                        <div class="flex gap-1 mb-2" data-field="mood">
                            <span class="mood-icon" data-mood="1">üò£</span>
                            <span class="mood-icon" data-mood="2">üòê</span>
                            <span class="mood-icon" data-mood="3">üôÇ</span>
                            <span class="mood-icon" data-mood="4">üòã</span>
                        </div>
                        <textarea placeholder="Î©îÎ™®" class="w-full p-2 border rounded-lg text-sm" rows="2" data-field="memo"></textarea>
                    </div>
                    
                    <div class="meal-section" data-meal="snack">
                        <h4 class="font-semibold text-purple-700 mb-3">üç™ Í∞ÑÏãù</h4>
                        <input type="text" placeholder="ÏùåÏãù ÏûÖÎ†•" class="w-full p-2 border rounded-lg mb-2" data-field="food">
                        <input type="number" placeholder="ÏπºÎ°úÎ¶¨ (kcal)" class="w-full p-2 border rounded-lg mb-2" data-field="calories">
                        <div class="flex gap-1 mb-2" data-field="mood">
                            <span class="mood-icon" data-mood="1">üò£</span>
                            <span class="mood-icon" data-mood="2">üòê</span>
                            <span class="mood-icon" data-mood="3">üôÇ</span>
                            <span class="mood-icon" data-mood="4">üòã</span>
                        </div>
                        <textarea placeholder="Î©îÎ™®" class="w-full p-2 border rounded-lg text-sm" rows="2" data-field="memo"></textarea>
                    </div>
                    
                    <div class="meal-section" data-meal="dinner">
                        <h4 class="font-semibold text-purple-700 mb-3">üåô Ï†ÄÎÖÅ</h4>
                        <input type="text" placeholder="ÏùåÏãù ÏûÖÎ†•" class="w-full p-2 border rounded-lg mb-2" data-field="food">
                        <input type="number" placeholder="ÏπºÎ°úÎ¶¨ (kcal)" class="w-full p-2 border rounded-lg mb-2" data-field="calories">
                        <div class="flex gap-1 mb-2" data-field="mood">
                            <span class="mood-icon" data-mood="1">üò£</span>
                            <span class="mood-icon" data-mood="2">üòê</span>
                            <span class="mood-icon" data-mood="3">üôÇ</span>
                            <span class="mood-icon" data-mood="4">üòã</span>
                        </div>
                        <textarea placeholder="Î©îÎ™®" class="w-full p-2 border rounded-lg text-sm" rows="2" data-field="memo"></textarea>
                    </div>
                </div>
                
                <!-- ÏùºÏùº Ï¥ù ÏπºÎ°úÎ¶¨ ÌëúÏãú -->
                <div class="mt-4 p-4 bg-purple-50 rounded-lg">
                    <div class="text-center">
                        <span class="text-sm text-purple-600">Ïò§Îäò Ï¥ù ÏπºÎ°úÎ¶¨</span>
                        <div class="text-2xl font-bold text-purple-800" id="totalCalories">0 kcal</div>
                    </div>
                </div>
            </div>

            <!-- Í∏∞ÌÉÄ Í∏∞Î°ù -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Ï≤¥Ï§ë & ÏàòÎ©¥ -->
                <div class="glass-card rounded-lg p-6 shadow-lg">
                    <h3 class="text-lg font-semibold text-purple-800 mb-4">‚öñÔ∏è Ï≤¥Ï§ë & ÏàòÎ©¥</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Ï≤¥Ï§ë (kg)</label>
                            <input type="number" step="0.1" placeholder="60.0" class="w-full p-2 border rounded-lg" id="weight">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ÏàòÎ©¥ ÏãúÍ∞Ñ</label>
                            <input type="number" step="0.5" placeholder="8.0" class="w-full p-2 border rounded-lg" id="sleep">
                        </div>
                    </div>
                </div>

                <!-- ÏóêÎÑàÏßÄ Î†àÎ≤® -->
                <div class="glass-card rounded-lg p-6 shadow-lg">
                    <h3 class="text-lg font-semibold text-purple-800 mb-4">‚ö° ÏóêÎÑàÏßÄ Î†àÎ≤®</h3>
                    <div class="space-y-4">
                        <input type="range" min="1" max="5" value="3" class="energy-slider" id="energyLevel">
                        <div class="flex justify-between text-xs text-gray-600">
                            <span>üò¥ ÌîºÍ≥§</span>
                            <span>üòê Î≥¥ÌÜµ</span>
                            <span>üòä Ï¢ãÏùå</span>
                            <span>üòÅ ÌôúÍ∏∞</span>
                            <span>üî• ÏµúÍ≥†</span>
                        </div>
                        <div class="text-center">
                            <span class="text-lg font-bold text-purple-600" id="energyText">Í∏∞Î∂Ñ Ï¢ãÏùå</span>
                        </div>
                    </div>
                </div>

                <!-- Ïö¥Îèô Í∏∞Î°ù -->
                <div class="glass-card rounded-lg p-6 shadow-lg">
                    <h3 class="text-lg font-semibold text-purple-800 mb-4">üèÉ‚Äç‚ôÄÔ∏è Ïö¥Îèô Í∏∞Î°ù</h3>
                    <textarea placeholder="Ïò§Îäò Ìïú Ïö¥ÎèôÏùÑ Í∏∞Î°ùÌï¥Î≥¥ÏÑ∏Ïöî" class="w-full p-2 border rounded-lg" rows="4" id="exercise"></textarea>
                </div>
            </div>

            <!-- Ïò§ÎäòÏùò ÎÖ∏Ìä∏ -->
            <div class="glass-card rounded-lg p-6 shadow-lg">
                <h3 class="text-lg font-semibold text-purple-800 mb-4">üìù Ïò§ÎäòÏùò ÎÖ∏Ìä∏</h3>
                <textarea placeholder="Ïò§ÎäòÏùò ÏÜåÍ∞êÏù¥ÎÇò Îã§ÏßêÏùÑ ÏûêÏú†Î°≠Í≤å Ï†ÅÏñ¥Î≥¥ÏÑ∏Ïöî" class="w-full p-3 border rounded-lg" rows="4" id="dailyNote"></textarea>
            </div>
        </div>

        <!-- Ï£ºÍ∞Ñ Í≥ÑÌöç ÌôîÎ©¥ -->
        <div id="weeklyView" class="hidden">
            <div class="glass-card rounded-lg p-6 shadow-lg">
                <h3 class="text-lg font-semibold text-purple-800 mb-4">üìÖ 7Ïùº ÏãùÎã® Í≥ÑÌöç</h3>
                
                <!-- Ï£ºÍ∞Ñ ÌÖåÏù¥Î∏î -->
                <div class="overflow-x-auto">
                    <table class="w-full border-collapse">
                        <thead>
                            <tr class="bg-purple-100">
                                <th class="border border-purple-200 p-3 text-purple-800">ÎÇ†Ïßú</th>
                                <th class="border border-purple-200 p-3 text-purple-800">üåÖ ÏïÑÏπ®</th>
                                <th class="border border-purple-200 p-3 text-purple-800">‚òÄÔ∏è Ï†êÏã¨</th>
                                <th class="border border-purple-200 p-3 text-purple-800">üç™ Í∞ÑÏãù</th>
                                <th class="border border-purple-200 p-3 text-purple-800">üåô Ï†ÄÎÖÅ</th>
                            </tr>
                        </thead>
                        <tbody id="weeklyTable">
                            <!-- ÌÖåÏù¥Î∏î ÌñâÎì§Ïù¥ Ïó¨Í∏∞Ïóê ÏÉùÏÑ±Îê©ÎãàÎã§ -->
                        </tbody>
                    </table>
                </div>

                <!-- Ï£ºÍ∞Ñ Î©îÎ™® -->
                <div class="mt-6">
                    <h4 class="text-md font-semibold text-purple-700 mb-2">üìã Ï£ºÍ∞Ñ Î©îÎ™®</h4>
                    <textarea placeholder="Ïù¥Î≤à Ï£º ÏãùÎã® Í≥ÑÌöçÏóê ÎåÄÌïú Î©îÎ™®Î•º ÏûëÏÑ±Ìï¥Î≥¥ÏÑ∏Ïöî" class="w-full p-3 border rounded-lg" rows="4" id="weeklyNote"></textarea>
                </div>
            </div>
        </div>
    </div>

    <!-- ÏãùÏÇ¨ ÏãúÍ∞Ñ ÏûÖÎ†• Î™®Îã¨ -->
    <div id="mealModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="glass-card rounded-lg p-6 max-w-md w-full mx-4">
            <h3 class="text-lg font-semibold text-purple-800 mb-4" id="modalTitle">ÏãùÏÇ¨ Í∏∞Î°ù</h3>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">ÏãúÍ∞Ñ</label>
                    <input type="time" class="w-full p-2 border rounded-lg" id="mealTime">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">ÏùåÏãù</label>
                    <input type="text" placeholder="Î®πÏùÄ ÏùåÏãùÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî" class="w-full p-2 border rounded-lg" id="mealFood">
                </div>
                <div class="flex gap-4">
                    <button id="saveMeal" class="flex-1 bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700">Ï†ÄÏû•</button>
                    <button id="cancelMeal" class="flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400">Ï∑®ÏÜå</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Ï†ÑÏó≠ Î≥ÄÏàò
        let currentLanguage = 'ko';
        let mealTimes = [];
        let caloriesChart, waterChart, weightChart;
        let currentAnalysisPeriod = 'weekly';
        
        // Ïñ∏Ïñ¥ Îç∞Ïù¥ÌÑ∞
        const translations = {
            ko: {
                title: "üíú Îã§Ïù¥Ïñ¥Ìä∏ Îã§Ïù¥Ïñ¥Î¶¨",
                dailyTab: "üìÜ Ïò§ÎäòÏùò Îã§Ïßê",
                weeklyTab: "üìÖ 7Ïùº ÏãùÎã® Í≥ÑÌöç",
                clockTitle: "üïê ÏãùÏÇ¨ ÏãúÍ∞Ñ Í∏∞Î°ù",
                waterTitle: "üíß Î¨º ÏÑ≠Ï∑®Îüâ",
                mealTitle: "üçΩÔ∏è ÏãùÏÇ¨ Í∏∞Î°ù",
                breakfast: "üåÖ ÏïÑÏπ®",
                lunch: "‚òÄÔ∏è Ï†êÏã¨",
                snack: "üç™ Í∞ÑÏãù",
                dinner: "üåô Ï†ÄÎÖÅ",
                weightSleep: "‚öñÔ∏è Ï≤¥Ï§ë & ÏàòÎ©¥",
                energy: "‚ö° ÏóêÎÑàÏßÄ Î†àÎ≤®",
                exercise: "üèÉ‚Äç‚ôÄÔ∏è Ïö¥Îèô Í∏∞Î°ù",
                dailyNote: "üìù Ïò§ÎäòÏùò ÎÖ∏Ìä∏"
            },
            en: {
                title: "üíú Diet Diary",
                dailyTab: "üìÜ Today's Goal",
                weeklyTab: "üìÖ 7-Day Meal Plan",
                clockTitle: "üïê Meal Time Record",
                waterTitle: "üíß Water Intake",
                mealTitle: "üçΩÔ∏è Meal Record",
                breakfast: "üåÖ Breakfast",
                lunch: "‚òÄÔ∏è Lunch",
                snack: "üç™ Snack",
                dinner: "üåô Dinner",
                weightSleep: "‚öñÔ∏è Weight & Sleep",
                energy: "‚ö° Energy Level",
                exercise: "üèÉ‚Äç‚ôÄÔ∏è Exercise Record",
                dailyNote: "üìù Daily Note"
            }
        };

        // Ï¥àÍ∏∞Ìôî
        document.addEventListener('DOMContentLoaded', function() {
            initApp();
        });

        function initApp() {
            setupClock();
            setupWaterCups();
            setupWeeklyTable();
            setupEventListeners();
            loadDarkMode();
            loadData();
            updateCurrentDate();
        }

        function setupClock() {
            const clockFace = document.getElementById('clockFace');
            const radius = 85; // ÏãúÍ≥Ñ Î∞òÏßÄÎ¶Ñ
            const centerX = 100;
            const centerY = 100;

            for (let i = 1; i <= 24; i++) {
                const angle = (i * 15 - 90) * (Math.PI / 180); // 12ÏãúÎ∂ÄÌÑ∞ ÏãúÏûë
                const x = centerX + radius * Math.cos(angle) - 15;
                const y = centerY + radius * Math.sin(angle) - 15;

                const hourElement = document.createElement('div');
                hourElement.className = 'clock-number';
                hourElement.style.left = x + 'px';
                hourElement.style.top = y + 'px';
                hourElement.textContent = i;
                hourElement.addEventListener('click', () => openMealModal(i));

                clockFace.appendChild(hourElement);
            }
        }

        function setupWaterCups() {
            const waterCups = document.getElementById('waterCups');
            for (let i = 0; i < 8; i++) {
                const cup = document.createElement('div');
                cup.className = 'water-cup';
                cup.addEventListener('click', () => toggleWaterCup(i));
                waterCups.appendChild(cup);
            }
        }

        function setupWeeklyTable() {
            const tbody = document.getElementById('weeklyTable');
            const today = new Date();
            
            for (let i = 0; i < 7; i++) {
                const date = new Date(today);
                date.setDate(today.getDate() + i);
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="border border-purple-200 p-2 font-medium text-purple-700">
                        ${date.getMonth() + 1}/${date.getDate()} (${['Ïùº', 'Ïõî', 'Ìôî', 'Ïàò', 'Î™©', 'Í∏à', 'ÌÜ†'][date.getDay()]})
                    </td>
                    <td class="border border-purple-200 p-2">
                        <input type="text" class="w-full p-1 border-0 bg-transparent" data-day="${i}" data-meal="breakfast">
                    </td>
                    <td class="border border-purple-200 p-2">
                        <input type="text" class="w-full p-1 border-0 bg-transparent" data-day="${i}" data-meal="lunch">
                    </td>
                    <td class="border border-purple-200 p-2">
                        <input type="text" class="w-full p-1 border-0 bg-transparent" data-day="${i}" data-meal="snack">
                    </td>
                    <td class="border border-purple-200 p-2">
                        <input type="text" class="w-full p-1 border-0 bg-transparent" data-day="${i}" data-meal="dinner">
                    </td>
                `;
                tbody.appendChild(row);
            }
        }

        function setupEventListeners() {
            // ÌÉ≠ Ï†ÑÌôò
            document.getElementById('dailyTab').addEventListener('click', () => switchTab('daily'));
            document.getElementById('weeklyTab').addEventListener('click', () => switchTab('weekly'));
            document.getElementById('analyticsTab').addEventListener('click', () => switchTab('analytics'));
            
            // Î∂ÑÏÑù Í∏∞Í∞Ñ Ï†ÑÌôò
            document.getElementById('weeklyAnalysis').addEventListener('click', () => switchAnalysisPeriod('weekly'));
            document.getElementById('monthlyAnalysis').addEventListener('click', () => switchAnalysisPeriod('monthly'));
            
            // Î∞±ÏóÖ/Î≥µÏõê Î≤ÑÌäº
            document.getElementById('exportBtn').addEventListener('click', exportData);
            document.getElementById('importFile').addEventListener('change', importData);
            
            // Ïñ∏Ïñ¥ Ï†ÑÌôò
            document.getElementById('langBtn').addEventListener('click', toggleLanguage);
            
            // Ï¥àÍ∏∞Ìôî Î≤ÑÌäº
            document.getElementById('resetBtn').addEventListener('click', resetData);
            
            // Í∏∞Î∂Ñ ÏïÑÏù¥ÏΩò ÌÅ¥Î¶≠
            document.querySelectorAll('.mood-icon').forEach(icon => {
                icon.addEventListener('click', function() {
                    const parent = this.parentElement;
                    parent.querySelectorAll('.mood-icon').forEach(i => i.classList.remove('selected'));
                    this.classList.add('selected');
                    saveData();
                });
            });
            
            // ÏóêÎÑàÏßÄ Ïä¨ÎùºÏù¥Îçî
            document.getElementById('energyLevel').addEventListener('input', function() {
                updateEnergyText(this.value);
                saveData();
            });
            
            // Î™®Îì† ÏûÖÎ†• ÌïÑÎìúÏóê ÏûêÎèô Ï†ÄÏû•
            document.querySelectorAll('input, textarea').forEach(element => {
                element.addEventListener('input', function() {
                    saveData();
                    updateTotalCalories();
                });
            });
            
            // Î™®Îã¨ Ïù¥Î≤§Ìä∏
            document.getElementById('saveMeal').addEventListener('click', saveMealTime);
            document.getElementById('cancelMeal').addEventListener('click', closeMealModal);
        }

        function switchTab(tab) {
            const dailyView = document.getElementById('dailyView');
            const weeklyView = document.getElementById('weeklyView');
            const analyticsView = document.getElementById('analyticsView');
            const dailyTab = document.getElementById('dailyTab');
            const weeklyTab = document.getElementById('weeklyTab');
            const analyticsTab = document.getElementById('analyticsTab');
            
            // Î™®Îì† Î∑∞ Ïà®Í∏∞Í∏∞
            [dailyView, weeklyView, analyticsView].forEach(view => view.classList.add('hidden'));
            
            // Î™®Îì† ÌÉ≠ ÎπÑÌôúÏÑ±Ìôî
            [dailyTab, weeklyTab, analyticsTab].forEach(tabBtn => {
                tabBtn.classList.remove('active');
                tabBtn.classList.add('bg-gray-200', 'text-gray-700');
            });
            
            // ÏÑ†ÌÉùÎêú ÌÉ≠ ÌôúÏÑ±Ìôî
            if (tab === 'daily') {
                dailyView.classList.remove('hidden');
                dailyTab.classList.add('active');
                dailyTab.classList.remove('bg-gray-200', 'text-gray-700');
            } else if (tab === 'weekly') {
                weeklyView.classList.remove('hidden');
                weeklyTab.classList.add('active');
                weeklyTab.classList.remove('bg-gray-200', 'text-gray-700');
            } else if (tab === 'analytics') {
                analyticsView.classList.remove('hidden');
                analyticsTab.classList.add('active');
                analyticsTab.classList.remove('bg-gray-200', 'text-gray-700');
                updateAnalytics();
            }
        }

        function toggleWaterCup(index) {
            const cups = document.querySelectorAll('.water-cup');
            const cup = cups[index];
            
            if (cup.classList.contains('filled')) {
                // ÏÑ†ÌÉùÎêú ÏªµÎ∂ÄÌÑ∞ ÎßàÏßÄÎßâÍπåÏßÄ Î™®Îëê ÎπÑÏö∞Í∏∞
                for (let i = index; i < cups.length; i++) {
                    cups[i].classList.remove('filled');
                }
            } else {
                // Ï≤´ Î≤àÏß∏Î∂ÄÌÑ∞ ÏÑ†ÌÉùÎêú ÏªµÍπåÏßÄ Î™®Îëê Ï±ÑÏö∞Í∏∞
                for (let i = 0; i <= index; i++) {
                    cups[i].classList.add('filled');
                }
            }
            
            updateWaterCount();
            saveData();
        }

        function updateWaterCount() {
            const filledCups = document.querySelectorAll('.water-cup.filled').length;
            document.getElementById('waterCount').textContent = filledCups;
            document.getElementById('waterTotal').textContent = filledCups * 500;
        }

        function updateEnergyText(value) {
            const texts = ['üò¥ ÌîºÍ≥§', 'üòê Î≥¥ÌÜµ', 'üòä Ï¢ãÏùå', 'üòÅ ÌôúÍ∏∞', 'üî• ÏµúÍ≥†'];
            document.getElementById('energyText').textContent = texts[value - 1];
        }

        function openMealModal(hour) {
            document.getElementById('mealModal').classList.remove('hidden');
            document.getElementById('mealModal').classList.add('flex');
            document.getElementById('mealTime').value = `${hour.toString().padStart(2, '0')}:00`;
        }

        function closeMealModal() {
            document.getElementById('mealModal').classList.add('hidden');
            document.getElementById('mealModal').classList.remove('flex');
        }

        function saveMealTime() {
            const time = document.getElementById('mealTime').value;
            const food = document.getElementById('mealFood').value;
            
            if (time && food) {
                // ÏãúÍ≥ÑÏóê ÎßàÏª§ Ï∂îÍ∞Ä Î°úÏßÅ (ÏÑ†ÌÉùÏÇ¨Ìï≠)
                console.log(`${time}Ïóê ${food} ÏÑ≠Ï∑® Í∏∞Î°ùÎê®`);
            }
            
            closeMealModal();
            saveData();
        }

        function updateCurrentDate() {
            const today = new Date();
            const options = { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric', 
                weekday: 'long' 
            };
            document.getElementById('currentDate').textContent = today.toLocaleDateString('ko-KR', options);
        }

        function toggleLanguage() {
            currentLanguage = currentLanguage === 'ko' ? 'en' : 'ko';
            document.getElementById('langBtn').textContent = currentLanguage === 'ko' ? 'üåê EN' : 'üåê ÌïúÍµ≠Ïñ¥';
            // Ïó¨Í∏∞Ïóê Ïã§Ï†ú Ïñ∏Ïñ¥ Î≥ÄÍ≤Ω Î°úÏßÅ Ï∂îÍ∞Ä Í∞ÄÎä•
        }

        function saveData() {
            const data = {
                date: new Date().toDateString(),
                meals: {},
                water: document.querySelectorAll('.water-cup.filled').length,
                weight: document.getElementById('weight').value,
                sleep: document.getElementById('sleep').value,
                energy: document.getElementById('energyLevel').value,
                exercise: document.getElementById('exercise').value,
                dailyNote: document.getElementById('dailyNote').value,
                weeklyNote: document.getElementById('weeklyNote').value,
                weeklyPlan: {}
            };

            // ÏãùÏÇ¨ Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû•
            document.querySelectorAll('.meal-section').forEach(section => {
                const meal = section.dataset.meal;
                data.meals[meal] = {
                    food: section.querySelector('[data-field="food"]').value,
                    mood: section.querySelector('.mood-icon.selected')?.dataset.mood || null,
                    memo: section.querySelector('[data-field="memo"]').value
                };
            });

            // Ï£ºÍ∞Ñ Í≥ÑÌöç Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû•
            document.querySelectorAll('#weeklyTable input').forEach(input => {
                const day = input.dataset.day;
                const meal = input.dataset.meal;
                if (!data.weeklyPlan[day]) data.weeklyPlan[day] = {};
                data.weeklyPlan[day][meal] = input.value;
            });

            // Î°úÏª¨ Ïä§ÌÜ†Î¶¨ÏßÄÏóê Ï†ÄÏû•
            try {
                const dataStr = JSON.stringify(data);
                localStorage.setItem('dietDiary', dataStr);
                console.log('Îç∞Ïù¥ÌÑ∞Í∞Ä ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§.');
            } catch (error) {
                console.log('Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû• Ï§ë Ïò§Î•ò Î∞úÏÉù:', error);
                alert('Ï†ÄÏû• Í≥µÍ∞ÑÏù¥ Î∂ÄÏ°±Ìï©ÎãàÎã§. ÏùºÎ∂Ä Îç∞Ïù¥ÌÑ∞Î•º ÏÇ≠Ï†úÌï¥Ï£ºÏÑ∏Ïöî.');
            }
        }

        function loadData() {
            try {
                const dataStr = localStorage.getItem('dietDiary');
                if (!dataStr) return;
                
                const data = JSON.parse(dataStr);
                
                // ÏãùÏÇ¨ Îç∞Ïù¥ÌÑ∞ Î°úÎìú
                Object.keys(data.meals || {}).forEach(meal => {
                    const section = document.querySelector(`[data-meal="${meal}"]`);
                    if (section) {
                        const mealData = data.meals[meal];
                        section.querySelector('[data-field="food"]').value = mealData.food || '';
                        section.querySelector('[data-field="calories"]').value = mealData.calories || '';
                        section.querySelector('[data-field="memo"]').value = mealData.memo || '';
                        
                        if (mealData.mood) {
                            section.querySelectorAll('.mood-icon').forEach(icon => {
                                icon.classList.remove('selected');
                            });
                            section.querySelector(`[data-mood="${mealData.mood}"]`)?.classList.add('selected');
                        }
                    }
                });

                updateTotalCalories();

                // Î¨º ÏÑ≠Ï∑®Îüâ Î°úÎìú
                const waterCount = data.water || 0;
                const cups = document.querySelectorAll('.water-cup');
                cups.forEach((cup, index) => {
                    if (index < waterCount) {
                        cup.classList.add('filled');
                    } else {
                        cup.classList.remove('filled');
                    }
                });
                updateWaterCount();

                // Í∏∞ÌÉÄ Îç∞Ïù¥ÌÑ∞ Î°úÎìú
                document.getElementById('weight').value = data.weight || '';
                document.getElementById('sleep').value = data.sleep || '';
                document.getElementById('energyLevel').value = data.energy || 3;
                updateEnergyText(data.energy || 3);
                document.getElementById('exercise').value = data.exercise || '';
                document.getElementById('dailyNote').value = data.dailyNote || '';
                document.getElementById('weeklyNote').value = data.weeklyNote || '';

                // Ï£ºÍ∞Ñ Í≥ÑÌöç Îç∞Ïù¥ÌÑ∞ Î°úÎìú
                Object.keys(data.weeklyPlan || {}).forEach(day => {
                    Object.keys(data.weeklyPlan[day] || {}).forEach(meal => {
                        const input = document.querySelector(`[data-day="${day}"][data-meal="${meal}"]`);
                        if (input) {
                            input.value = data.weeklyPlan[day][meal] || '';
                        }
                    });
                });

            } catch (error) {
                console.log('Îç∞Ïù¥ÌÑ∞ Î°úÎìú Ï§ë Ïò§Î•ò Î∞úÏÉù:', error);
                alert('Ï†ÄÏû•Îêú Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò§Îäî Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');
            }
        }

        function resetData() {
            if (confirm('Î™®Îì† Îç∞Ïù¥ÌÑ∞Î•º Ï¥àÍ∏∞ÌôîÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {
                localStorage.removeItem('dietDiary');
                localStorage.removeItem('dietDiaryHistory');
                
                // Ìèº Ï¥àÍ∏∞Ìôî
                document.querySelectorAll('input, textarea').forEach(element => {
                    element.value = '';
                });
                
                // Í∏∞Î∂Ñ ÏïÑÏù¥ÏΩò Ï¥àÍ∏∞Ìôî
                document.querySelectorAll('.mood-icon').forEach(icon => {
                    icon.classList.remove('selected');
                });
                
                // Î¨ºÏªµ Ï¥àÍ∏∞Ìôî
                document.querySelectorAll('.water-cup').forEach(cup => {
                    cup.classList.remove('filled');
                });
                updateWaterCount();
                
                // ÏóêÎÑàÏßÄ Î†àÎ≤® Ï¥àÍ∏∞Ìôî
                document.getElementById('energyLevel').value = 3;
                updateEnergyText(3);
                
                // Ï¥ù ÏπºÎ°úÎ¶¨ Ï¥àÍ∏∞Ìôî
                updateTotalCalories();
                
                alert('Î™®Îì† Îç∞Ïù¥ÌÑ∞Í∞Ä Ï¥àÍ∏∞ÌôîÎêòÏóàÏäµÎãàÎã§.');
            }
        }

        // Î∂ÑÏÑù Í∏∞Í∞Ñ Ï†ÑÌôò
        function switchAnalysisPeriod(period) {
            currentAnalysisPeriod = period;
            
            const weeklyBtn = document.getElementById('weeklyAnalysis');
            const monthlyBtn = document.getElementById('monthlyAnalysis');
            
            if (period === 'weekly') {
                weeklyBtn.classList.add('bg-purple-600', 'text-white', 'active');
                weeklyBtn.classList.remove('bg-gray-200', 'text-gray-700');
                monthlyBtn.classList.add('bg-gray-200', 'text-gray-700');
                monthlyBtn.classList.remove('bg-purple-600', 'text-white', 'active');
            } else {
                monthlyBtn.classList.add('bg-purple-600', 'text-white', 'active');
                monthlyBtn.classList.remove('bg-gray-200', 'text-gray-700');
                weeklyBtn.classList.add('bg-gray-200', 'text-gray-700');
                weeklyBtn.classList.remove('bg-purple-600', 'text-white', 'active');
            }
            
            updateAnalytics();
        }

        // Î∂ÑÏÑù Îç∞Ïù¥ÌÑ∞ ÏóÖÎç∞Ïù¥Ìä∏
        function updateAnalytics() {
            const historyData = JSON.parse(localStorage.getItem('dietDiaryHistory') || '[]');
            
            if (historyData.length === 0) {
                showNoDataMessage();
                return;
            }
            
            if (currentAnalysisPeriod === 'weekly') {
                updateWeeklyAnalytics(historyData);
            } else {
                updateMonthlyAnalytics(historyData);
            }
        }

        // ÏßÄÎÇú 7Ïùº Î∂ÑÏÑù (ÏùºÎ≥Ñ)
        function updateWeeklyAnalytics(historyData) {
            const last7Days = getLast7DaysData(historyData);
            
            updateCaloriesChart(last7Days, 'daily');
            updateWaterChart(last7Days, 'daily');
            updateWeightChart(last7Days, 'daily');
            updateStatistics(last7Days);
        }

        // ÏßÄÎÇú 4Ï£º Î∂ÑÏÑù (Ï£ºÎ≥Ñ)
        function updateMonthlyAnalytics(historyData) {
            const last4Weeks = getLast4WeeksData(historyData);
            
            updateCaloriesChart(last4Weeks, 'weekly');
            updateWaterChart(last4Weeks, 'weekly');
            updateWeightChart(last4Weeks, 'weekly');
            updateStatistics(last4Weeks);
        }

        // ÏßÄÎÇú 7Ïùº Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞
        function getLast7DaysData(historyData) {
            const result = [];
            const today = new Date();
            
            for (let i = 6; i >= 0; i--) {
                const date = new Date(today);
                date.setDate(today.getDate() - i);
                const dateStr = date.toDateString();
                
                const dayData = historyData.find(entry => entry.date === dateStr);
                result.push({
                    date: date,
                    label: `${date.getMonth() + 1}/${date.getDate()}`,
                    calories: dayData?.totalCalories || 0,
                    water: dayData ? (dayData.water * 500) : 0,
                    weight: dayData?.weight ? parseFloat(dayData.weight) : null
                });
            }
            
            return result;
        }

        // ÏßÄÎÇú 4Ï£º Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞ (Ï£ºÎ≥Ñ ÌèâÍ∑†)
        function getLast4WeeksData(historyData) {
            const result = [];
            const today = new Date();
            
            for (let week = 3; week >= 0; week--) {
                const weekStart = new Date(today);
                weekStart.setDate(today.getDate() - (week * 7 + 6));
                const weekEnd = new Date(today);
                weekEnd.setDate(today.getDate() - (week * 7));
                
                const weekData = historyData.filter(entry => {
                    const entryDate = new Date(entry.date);
                    return entryDate >= weekStart && entryDate <= weekEnd;
                });
                
                const avgCalories = weekData.length > 0 ? 
                    Math.round(weekData.reduce((sum, day) => sum + (day.totalCalories || 0), 0) / weekData.length) : 0;
                
                const avgWater = weekData.length > 0 ? 
                    Math.round(weekData.reduce((sum, day) => sum + ((day.water || 0) * 500), 0) / weekData.length) : 0;
                
                const weights = weekData.map(day => day.weight ? parseFloat(day.weight) : null).filter(w => w !== null);
                const avgWeight = weights.length > 0 ? 
                    Math.round((weights.reduce((sum, w) => sum + w, 0) / weights.length) * 10) / 10 : null;
                
                result.push({
                    label: `${weekStart.getMonth() + 1}/${weekStart.getDate()} Ï£º`,
                    calories: avgCalories,
                    water: avgWater,
                    weight: avgWeight
                });
            }
            
            return result;
        }

        // ÏπºÎ°úÎ¶¨ Ï∞®Ìä∏ ÏóÖÎç∞Ïù¥Ìä∏
        function updateCaloriesChart(data, type) {
            const ctx = document.getElementById('caloriesChart').getContext('2d');
            
            if (caloriesChart) {
                caloriesChart.destroy();
            }
            
            caloriesChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.map(d => d.label),
                    datasets: [{
                        label: type === 'daily' ? 'ÏùºÏùº ÏπºÎ°úÎ¶¨' : 'Ï£ºÍ∞Ñ ÌèâÍ∑† ÏπºÎ°úÎ¶¨',
                        data: data.map(d => d.calories),
                        borderColor: '#e879f9',
                        backgroundColor: 'rgba(232, 121, 249, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'kcal'
                            }
                        }
                    }
                }
            });
        }

        // ÏàòÎ∂Ñ Ï∞®Ìä∏ ÏóÖÎç∞Ïù¥Ìä∏
        function updateWaterChart(data, type) {
            const ctx = document.getElementById('waterChart').getContext('2d');
            
            if (waterChart) {
                waterChart.destroy();
            }
            
            waterChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: data.map(d => d.label),
                    datasets: [{
                        label: type === 'daily' ? 'ÏùºÏùº ÏàòÎ∂Ñ ÏÑ≠Ï∑®' : 'Ï£ºÍ∞Ñ ÌèâÍ∑† ÏàòÎ∂Ñ ÏÑ≠Ï∑®',
                        data: data.map(d => d.water),
                        backgroundColor: 'rgba(6, 182, 212, 0.8)',
                        borderColor: '#06b6d4',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 2500,
                            title: {
                                display: true,
                                text: 'ml'
                            }
                        }
                    }
                }
            });
        }

        // Ï≤¥Ï§ë Ï∞®Ìä∏ ÏóÖÎç∞Ïù¥Ìä∏
        function updateWeightChart(data, type) {
            const ctx = document.getElementById('weightChart').getContext('2d');
            
            if (weightChart) {
                weightChart.destroy();
            }
            
            const weightData = data.filter(d => d.weight !== null);
            
            if (weightData.length === 0) {
                ctx.fillText('Ï≤¥Ï§ë Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§', 50, 50);
                return;
            }
            
            weightChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: weightData.map(d => d.label),
                    datasets: [{
                        label: type === 'daily' ? 'ÏùºÏùº Ï≤¥Ï§ë' : 'Ï£ºÍ∞Ñ ÌèâÍ∑† Ï≤¥Ï§ë',
                        data: weightData.map(d => d.weight),
                        borderColor: '#8b5cf6',
                        backgroundColor: 'rgba(139, 92, 246, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            title: {
                                display: true,
                                text: 'kg'
                            }
                        }
                    }
                }
            });
        }

        // ÌÜµÍ≥Ñ ÏóÖÎç∞Ïù¥Ìä∏
        function updateStatistics(data) {
            const calories = data.map(d => d.calories).filter(c => c > 0);
            const water = data.map(d => d.water).filter(w => w > 0);
            
            // ÏπºÎ°úÎ¶¨ ÌÜµÍ≥Ñ
            const avgCalories = calories.length > 0 ? Math.round(calories.reduce((a, b) => a + b, 0) / calories.length) : 0;
            const maxCalories = calories.length > 0 ? Math.max(...calories) : 0;
            const minCalories = calories.length > 0 ? Math.min(...calories) : 0;
            
            document.getElementById('avgCalories').textContent = avgCalories + ' kcal';
            document.getElementById('maxCalories').textContent = maxCalories + ' kcal';
            document.getElementById('minCalories').textContent = minCalories + ' kcal';
            
            // ÏàòÎ∂Ñ ÌÜµÍ≥Ñ
            const avgWater = water.length > 0 ? Math.round(water.reduce((a, b) => a + b, 0) / water.length) : 0;
            const goalRate = Math.round((avgWater / 2000) * 100);
            
            document.getElementById('avgWater').textContent = avgWater + ' ml';
            document.getElementById('waterGoalRate').textContent = Math.min(goalRate, 100) + '%';
            document.getElementById('waterProgress').style.width = Math.min(goalRate, 100) + '%';
            
            // Ï≤¥Ï§ë Î≥ÄÌôî
            const weights = data.map(d => d.weight).filter(w => w !== null);
            if (weights.length >= 2) {
                const weightChange = Math.round((weights[weights.length - 1] - weights[0]) * 10) / 10;
                const changeText = weightChange > 0 ? `+${weightChange} kg` : `${weightChange} kg`;
                document.getElementById('weightChange').textContent = changeText;
            } else {
                document.getElementById('weightChange').textContent = 'Îç∞Ïù¥ÌÑ∞ Î∂ÄÏ°±';
            }
            
            // Ï¢ÖÌï© Ï†êÏàò Í≥ÑÏÇ∞
            updateHealthScores(data);
        }

        // Í±¥Í∞ï Ï†êÏàò Í≥ÑÏÇ∞
        function updateHealthScores(data) {
            const validDays = data.filter(d => d.calories > 0 || d.water > 0);
            
            // ÏàòÎ∂Ñ Ï†êÏàò (Î™©Ìëú 2000ml Í∏∞Ï§Ä)
            const waterScores = data.map(d => Math.min((d.water / 2000) * 100, 100));
            const hydrationScore = waterScores.length > 0 ? Math.round(waterScores.reduce((a, b) => a + b, 0) / waterScores.length) : 0;
            
            // Íæ∏Ï§ÄÌï® Ï†êÏàò (Í∏∞Î°ùÌïú ÎÇ† ÎπÑÏú®)
            const consistencyScore = Math.round((validDays.length / data.length) * 100);
            
            // Í∑†Ìòï Ï†êÏàò (ÏπºÎ°úÎ¶¨ ÌëúÏ§ÄÌé∏Ï∞® Í∏∞Î∞ò)
            const calories = data.map(d => d.calories).filter(c => c > 0);
            let balanceScore = 80; // Í∏∞Î≥∏Í∞í
            if (calories.length > 2) {
                const avg = calories.reduce((a, b) => a + b, 0) / calories.length;
                const variance = calories.reduce((sum, cal) => sum + Math.pow(cal - avg, 2), 0) / calories.length;
                const stdDev = Math.sqrt(variance);
                balanceScore = Math.max(0, Math.min(100, 100 - (stdDev / avg) * 100));
            }
            
            // Ï¢ÖÌï© Ï†êÏàò
            const overallScore = Math.round((hydrationScore + consistencyScore + balanceScore) / 3);
            
            document.getElementById('overallScore').textContent = overallScore;
            document.getElementById('hydrationScore').textContent = hydrationScore;
            document.getElementById('consistencyScore').textContent = consistencyScore;
            document.getElementById('balanceScore').textContent = Math.round(balanceScore);
        }

        // Îç∞Ïù¥ÌÑ∞ ÏóÜÏùå Î©îÏãúÏßÄ
        function showNoDataMessage() {
            ['caloriesChart', 'waterChart', 'weightChart'].forEach(chartId => {
                const canvas = document.getElementById(chartId);
                const ctx = canvas.getContext('2d');
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = '#6b7280';
                ctx.font = '16px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('Î∂ÑÏÑùÌï† Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§', canvas.width / 2, canvas.height / 2);
                ctx.fillText('Î©∞Ïπ† Îçî Í∏∞Î°ùÌï¥Î≥¥ÏÑ∏Ïöî! üí™', canvas.width / 2, canvas.height / 2 + 25);
            });
            
            // ÌÜµÍ≥Ñ Ï¥àÍ∏∞Ìôî
            document.getElementById('avgCalories').textContent = '0 kcal';
            document.getElementById('maxCalories').textContent = '0 kcal';
            document.getElementById('minCalories').textContent = '0 kcal';
            document.getElementById('avgWater').textContent = '0 ml';
            document.getElementById('waterGoalRate').textContent = '0%';
            document.getElementById('weightChange').textContent = 'Îç∞Ïù¥ÌÑ∞ ÏóÜÏùå';
        }
        function exportData() {
            try {
                const dataStr = localStorage.getItem('dietDiary');
                if (!dataStr) {
                    alert('Ï†ÄÏû•Îêú Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§.');
                    return;
                }
                
                const data = JSON.parse(dataStr);
                const exportData = {
                    ...data,
                    exportDate: new Date().toISOString(),
                    version: '1.0'
                };
                
                const blob = new Blob([JSON.stringify(exportData, null, 2)], { 
                    type: 'application/json' 
                });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = `diet-diary-backup-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                alert('Îç∞Ïù¥ÌÑ∞Í∞Ä Îã§Ïö¥Î°úÎìú Ìè¥ÎçîÏóê Î∞±ÏóÖÎêòÏóàÏäµÎãàÎã§.');
            } catch (error) {
                alert('Îç∞Ïù¥ÌÑ∞ ÎÇ¥Î≥¥ÎÇ¥Í∏∞ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');
            }
        }

        // Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞ (Î≥µÏõê)
        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const importedData = JSON.parse(e.target.result);
                    
                    // Î∞±ÏóÖ ÌååÏùº Ïú†Ìö®ÏÑ± Í≤ÄÏÇ¨
                    if (!importedData.meals && !importedData.weeklyPlan) {
                        alert('Ïò¨Î∞îÎ•¥ÏßÄ ÏïäÏùÄ Î∞±ÏóÖ ÌååÏùºÏûÖÎãàÎã§.');
                        return;
                    }
                    
                    // Í∏∞Ï°¥ Îç∞Ïù¥ÌÑ∞ ÎçÆÏñ¥Ïì∞Í∏∞ ÌôïÏù∏
                    if (localStorage.getItem('dietDiary')) {
                        if (!confirm('Í∏∞Ï°¥ Îç∞Ïù¥ÌÑ∞Î•º ÎçÆÏñ¥Ïì∞ÏãúÍ≤†ÏäµÎãàÍπå?')) {
                            return;
                        }
                    }
                    
                    localStorage.setItem('dietDiary', JSON.stringify(importedData));
                    loadData();
                    alert('Îç∞Ïù¥ÌÑ∞Î•º ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Í∞ÄÏ†∏ÏôîÏäµÎãàÎã§.');
                } catch (error) {
                    alert('ÌååÏùº ÌòïÏãùÏù¥ Ïò¨Î∞îÎ•¥ÏßÄ ÏïäÏäµÎãàÎã§.');
                }
            };
            reader.readAsText(file);
        }

        // ÌÇ§Î≥¥Îìú Îã®Ï∂ïÌÇ§ (ÏÑ†ÌÉùÏÇ¨Ìï≠)
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey || e.metaKey) {
                switch (e.key) {
                    case 's':
                        e.preventDefault();
                        saveData();
                        break;
                    case '1':
                        e.preventDefault();
                        switchTab('daily');
                        break;
                    case '2':
                        e.preventDefault();
                        switchTab('weekly');
                        break;
                }
            }
        });

        // PWA ÏßÄÏõêÏùÑ ÏúÑÌïú ÏÑúÎπÑÏä§ ÏõåÏª§ Îì±Î°ù (ÏÑ†ÌÉùÏÇ¨Ìï≠)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                // Ïã§Ï†ú ÌôòÍ≤ΩÏóêÏÑúÎäî ÏÑúÎπÑÏä§ ÏõåÏª§ ÌååÏùºÏùÑ ÎßåÎì§Ïñ¥ Îì±Î°ù
                console.log('PWA Í∏∞Îä•ÏùÑ Ï∂îÍ∞ÄÌïòÎ†§Î©¥ ÏÑúÎπÑÏä§ ÏõåÏª§Î•º Íµ¨ÌòÑÌïòÏÑ∏Ïöî.');
            });
        }

        // ÌÑ∞Ïπò Ï†úÏä§Ï≤ò ÏßÄÏõê (Î™®Î∞îÏùº)
        let touchStartX = 0;
        let touchEndX = 0;

        document.addEventListener('touchstart', function(e) {
            touchStartX = e.changedTouches[0].screenX;
        });

        document.addEventListener('touchend', function(e) {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            const swipeThreshold = 50;
            const diff = touchStartX - touchEndX;
            
            if (Math.abs(diff) > swipeThreshold) {
                if (diff > 0) {
                    // ÏôºÏ™ΩÏúºÎ°ú Ïä§ÏôÄÏù¥ÌîÑ - Ï£ºÍ∞Ñ Í≥ÑÌöçÏúºÎ°ú
                    switchTab('weekly');
                } else {
                    // Ïò§Î•∏Ï™ΩÏúºÎ°ú Ïä§ÏôÄÏù¥ÌîÑ - Îç∞ÏùºÎ¶¨Î°ú
                    switchTab('daily');
                }
            }
        }

        // Î∞òÏùëÌòï ÎîîÏûêÏù∏ÏùÑ ÏúÑÌïú ÌôîÎ©¥ ÌÅ¨Í∏∞ Í∞êÏßÄ
        function handleResize() {
            const isMobile = window.innerWidth < 768;
            
            if (isMobile) {
                // Î™®Î∞îÏùºÏóêÏÑúÎäî ÌÖåÏù¥Î∏îÏùÑ Ïπ¥Îìú ÌòïÌÉúÎ°ú Î≥ÄÍ≤Ω (ÏÑ†ÌÉùÏÇ¨Ìï≠)
                document.querySelectorAll('.glass-card').forEach(card => {
                    card.style.margin = '0.5rem 0';
                });
            }
        }

        window.addEventListener('resize', handleResize);
        handleResize(); // Ï¥àÍ∏∞ Ïã§Ìñâ

        // Îã§ÌÅ¨ Î™®Îìú ÌÜ†Í∏Ä (ÏÑ†ÌÉùÏÇ¨Ìï≠)
        function toggleDarkMode() {
            document.body.classList.toggle('dark');
            const isDark = document.body.classList.contains('dark');
            localStorage.setItem('darkMode', isDark);
        }

        // Îã§ÌÅ¨ Î™®Îìú ÏÑ§Ï†ï Î°úÎìú
        function loadDarkMode() {
            const isDark = localStorage.getItem('darkMode') === 'true';
            if (isDark) {
                document.body.classList.add('dark');
            }
        }

        // ÏïåÎ¶º Î∞è Î¶¨ÎßàÏù∏Îçî Í∏∞Îä• (ÏÑ†ÌÉùÏÇ¨Ìï≠)
        function setReminder() {
            if ('Notification' in window) {
                Notification.requestPermission().then(function(permission) {
                    if (permission === 'granted') {
                        // ÏãùÏÇ¨ ÏãúÍ∞Ñ ÏïåÎ¶º ÏÑ§Ï†ï
                        const now = new Date();
                        const nextMealTime = new Date(now);
                        nextMealTime.setHours(12, 0, 0, 0); // Ï†êÏã¨ ÏãúÍ∞Ñ ÏòàÏãú
                        
                        if (nextMealTime > now) {
                            const timeUntilMeal = nextMealTime.getTime() - now.getTime();
                            setTimeout(function() {
                                new Notification('üçΩÔ∏è ÏãùÏÇ¨ ÏãúÍ∞ÑÏù¥ÏóêÏöî!', {
                                    body: 'Ïò§ÎäòÏùò ÏãùÏÇ¨Î•º Í∏∞Î°ùÌï¥Î≥¥ÏÑ∏Ïöî.',
                                    icon: '/icon-192x192.png' // Ïã§Ï†ú ÏïÑÏù¥ÏΩò Í≤ΩÎ°ú
                                });
                            }, timeUntilMeal);
                        }
                    }
                });
            }
        }

        // Ïï± Ï¥àÍ∏∞Ìôî Ïãú ÏïåÎ¶º ÏÑ§Ï†ï
        // setReminder(); // ÌïÑÏöîÏãú Ï£ºÏÑù Ìï¥Ï†ú
    </script>
</body>
</html>
